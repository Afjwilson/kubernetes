global
	daemon
	maxconn 256
	tune.ssl.default-dh-param 2048
	external-check

defaults
	mode tcp
	timeout connect 5000ms
	timeout client 50000ms
	timeout server 50000ms

frontend https-backends
	bind *:443
	default_backend servershttps
	mode tcp

backend servershttps
	mode tcp
	balance static-rr
	option external-check
	external-check path "/usr/bin:/usr/local/bin"
	external-check command "/root/conjur-health-check.sh"
# server details are appended below by write_haconfig.sh called
# from the initcontainer - see haproxy-conjur-master.yaml
